version: 2.1

jobs:
  config_infrastructure: 
    docker:
      - image: python:3.7-alpine3.11
    steps:
      - checkout
      - run:
          name: Install Ansible
          command: apk add --update ansible
      - run:
          name: Run Playbook and Configure server
          command: ansible-playbook -i inventory playbook.yml --private-key MyKey.pem
 

workflows:
  main:
    jobs:
      - config_infrastructure: